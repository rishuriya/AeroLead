<div class="container-fluid">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><%= link_to "Home", root_path %></li>
      <li class="breadcrumb-item"><%= link_to "Blog Posts", blog_posts_path %></li>
      <li class="breadcrumb-item"><%= link_to @blog_post.title, blog_post_path(@blog_post.slug) %></li>
      <li class="breadcrumb-item active" aria-current="page">Edit</li>
    </ol>
  </nav>

  <!-- Page Header -->
  <div class="row mb-4">
    <div class="col-md-8">
      <h1 class="display-5 fw-bold">
        <i class="bi bi-pencil text-warning"></i>
        Edit Blog Post
      </h1>
      <p class="text-muted">Update your article content and settings</p>
    </div>
    <div class="col-md-4 text-end">
      <%= link_to blog_post_path(@blog_post.slug), class: "btn btn-outline-secondary" do %>
        <i class="bi bi-eye"></i> Preview
      <% end %>
    </div>
  </div>

  <!-- Status Alert -->
  <% if @blog_post.draft? %>
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
      <i class="bi bi-info-circle"></i>
      <strong>Draft Mode:</strong> This post is not publicly visible. Publish it to make it accessible.
      <%= button_to "Publish Now", publish_blog_post_path(@blog_post.slug), method: :post, class: "btn btn-sm btn-success ms-3" %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% elsif @blog_post.published? %>
    <div class="alert alert-success alert-dismissible fade show" role="alert">
      <i class="bi bi-check-circle"></i>
      <strong>Published:</strong> This post is live and publicly visible.
      Published on <%= @blog_post.published_at.strftime("%B %d, %Y") %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% end %>

  <!-- Form Card -->
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-body">
          <%= render 'form', blog_post: @blog_post %>
        </div>
      </div>
    </div>
  </div>

  <!-- Post Info -->
  <div class="row mt-4">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h6 class="mb-0">
            <i class="bi bi-info-circle"></i> Post Information
          </h6>
        </div>
        <div class="card-body">
          <dl class="row mb-0">
            <dt class="col-sm-4">Created:</dt>
            <dd class="col-sm-8"><%= @blog_post.created_at.strftime("%B %d, %Y at %I:%M %p") %></dd>

            <dt class="col-sm-4">Last Updated:</dt>
            <dd class="col-sm-8"><%= @blog_post.updated_at.strftime("%B %d, %Y at %I:%M %p") %></dd>

            <dt class="col-sm-4">Word Count:</dt>
            <dd class="col-sm-8"><%= number_with_delimiter(@blog_post.word_count) %> words</dd>

            <dt class="col-sm-4">Reading Time:</dt>
            <dd class="col-sm-8"><%= @blog_post.reading_time %> minutes</dd>

            <dt class="col-sm-4">Status:</dt>
            <dd class="col-sm-8">
              <% if @blog_post.published? %>
                <span class="badge bg-success">Published</span>
              <% elsif @blog_post.draft? %>
                <span class="badge bg-warning">Draft</span>
              <% else %>
                <span class="badge bg-secondary">Archived</span>
              <% end %>
            </dd>
          </dl>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h6 class="mb-0">
            <i class="bi bi-gear"></i> Quick Actions
          </h6>
        </div>
        <div class="card-body">
          <div class="d-grid gap-2">
            <%= link_to blog_post_path(@blog_post.slug), class: "btn btn-outline-primary" do %>
              <i class="bi bi-eye"></i> View Post
            <% end %>

            <% if @blog_post.draft? %>
              <%= button_to publish_blog_post_path(@blog_post.slug), method: :post, class: "btn btn-outline-success" do %>
                <i class="bi bi-upload"></i> Publish Post
              <% end %>
            <% elsif @blog_post.published? %>
              <%= button_to unpublish_blog_post_path(@blog_post.slug), method: :post, class: "btn btn-outline-warning" do %>
                <i class="bi bi-download"></i> Unpublish Post
              <% end %>
            <% end %>

            <%= button_to blog_post_path(@blog_post.slug), method: :delete,
                data: { confirm: "Are you sure you want to delete this post? This action cannot be undone." },
                class: "btn btn-outline-danger" do %>
              <i class="bi bi-trash"></i> Delete Post
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
